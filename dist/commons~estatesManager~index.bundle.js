(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,n){"use strict";var r=n(105),a=n.n(r);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u={401:"Unauthorized. Check if API Key or access token is valid. ",403:"Forbidden. You may not have access to the resource, or have not set the correct scope. "},l=function(){function e(t){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiRoot=t.apiRoot,this.apiVersion=t.apiVersion?"v".concat(t.apiVersion):"v2",this.authMode=t.authMode?t.authMode:"token",this.apiKey=t.apiKey?t.apiKey:"",this.accessToken=t.accessToken,this.defaultOptions={method:"GET",headers:{"Content-Type":"application/json"}},this.authMode){case"token":this.defaultOptions.headers.Authorization="Bearer ".concat(this.accessToken);break;case"apiKey":default:this.defaultOptions.headers["API-KEY"]=this.apiKey}}var t,n,r;return t=e,(n=[{key:"getEstate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data";t=t?"/".concat(t):"";var r="/".concat(this.apiVersion,"/estates/").concat(n).concat(t);return this.callApi(r,"GET",e)}},{key:"callApi",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.createHeader(),o={header:i,method:t},c="".concat(this.apiRoot).concat(e);if("GET"===t||"PUT"===t){"GET"===t&&(n.api_key=this.apiKey);var s=Object.keys(n).map(function(e){return e+"="+n[e]}).join("&");c+=""!==s?"?".concat(s):""}else o.body=r;var l=[401,403],f={},p=a()(c,o).then(function(e){return f.header=e.headers,f.status=e.status,l.includes(e.status)?(f.data=u[f.status],Promise.reject(f)):(f.statusText=e.statusText,e.json())}).then(function(e){return f.data=e,f});return p}},{key:"buildParamString",value:function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")}},{key:"buildUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.buildParamString(t);return"".concat(this.apiRoot,"/").concat(this.apiVersion).concat(e).concat(""!==n?"?".concat(n):"")}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.buildUrl(e,t);return a()(n,o({},this.defaultOptions))}},{key:"createHeader",value:function(){var e=new Headers({"Content-Type":"application/json"});switch(this.authMode){case"token":break;case"apiKey":e.append("API-KEY",this.apiKey)}return e}}])&&s(t.prototype,n),r&&s(t,r),e}();t.a=l},148:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(73),o=n(74),c=n(6),s=n(12),u=n.n(s),l=function(e){var t=e.fieldType,n=e.interactive,r=e.children,i=e.onClick;switch(t){case c.c.TEXT:if(n)return a.a.createElement("input",{type:"text",className:"field-control",value:r,onClick:i});default:return a.a.createElement("div",{className:"field-control",onClick:i},r)}};l.propType={fieldType:u.a.string,interactive:u.a.boolean,children:u.a.node.isRequired,onClick:u.a.func.isRequired};var f=function(e){var t=e.filterName,n=e.filterValue,r=e.filterIndex;return a.a.createElement("span",{className:"active-filter",key:r},"".concat(t,":").concat(n))},p=function(e){var t=e.filters;return a.a.createElement("div",{className:"active-filters"},Object.keys(t).map(function(e,n){return a.a.createElement(f,{key:n,filterIndex:n,filterName:e,filterValue:t[e]})}))},h=function(e){var t=e.options,n=e.onChange,r=e.filterName;return a.a.createElement("select",{onChange:function(e){return n(r,e.target.value)},className:"select-filter filter-".concat(r)},t.map(function(e,t){return a.a.createElement("option",{key:t,value:e.value},e.text)}))};function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}h.propType={filterName:u.a.string.isRequired,onChange:u.a.func,options:u.a.arrayOf(u.a.shape({value:u.a.string.isRequired,text:u.a.string.isRequired}).isRequired).isRequired};var O=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,b(t).call(this,e))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.searchParams;this.handleFilterChange=this.handleFilterChange.bind(this),t(Object(o.a)(n))}},{key:"componentDidUpdate",value:function(e){if(this.props.searchParams!==e.searchParams){var t=this.props,n=t.dispatch,r=t.searchParams;n(Object(o.a)(r))}}},{key:"handleFilterChange",value:function(e,t){var n,r,a=this.props,i=a.dispatch,s=a.searchParams;i((n={param:{fieldName:e,fieldValue:t},filters:{name:"Category",value:t}},{type:c.d.FILTER_UPDATED,param:n,filters:r})),i(Object(o.a)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach(function(t){E(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},s,E({},e,t))))}},{key:"render",value:function(){var e=this.props,t=e.searchParams,n=e.list,r=e.listData,i=(e.listMeta,e.isFetching),o=(e.lastUpdated,e.error),c=o?o.message:"",s=n.map(function(e,t){return a.a.createElement("div",{className:"estate row",key:t},r[e].name)});return a.a.createElement("div",{className:"estate-manager-container"},a.a.createElement("div",{className:"filters-container"},a.a.createElement(h,{filterName:"categories",options:[{value:"ACCOMM",text:"Accommodation"},{value:"ATTRACTION",text:"Attraction"},{value:"TOUR",text:"Tour"}],onChange:this.handleFilterChange}),a.a.createElement("div",{className:"active-filters-container"},a.a.createElement(p,{filters:t}))),a.a.createElement("div",{className:"notification-message"},c),a.a.createElement("div",null,i&&!o?a.a.createElement("div",null,"Loading..."):s))}}])&&v(n.prototype,i),s&&v(n,s),t}();t.default=Object(i.b)(function(e){var t=e.estates,n=t.isFetching,r=t.lastUpdated,a=t.list,i=t.listData,o=t.listMeta,c=t.error;return{searchParams:t.searchParams,isFetching:n,lastUpdated:r,list:a,listData:i,listMeta:o,error:c}})(O)},6:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o});var r={REQUEST_GET:"REQUEST_GET",RECEIVED_GET:"RECEIVE_GET",ERROR_GET:"ERROR_GET",UNAUTHORIZED_REQUEST:"UNAUTHORIZED_REQUEST"},a={FILTER_UPDATED:"FILTER_UPDATED",FILTER_REMOVED:"FILTER_REMOVED",INVALIDATE_LIST:"INVALIDATE_LIST",TOGGLE_EDIT:"TOGGLE_EDIT"},i={ESTATE:"ESTATE",ASSET:"ASSET",TAXONOMY:"TAXONOMY"},o={TEXT:"text",NUMBER:"number",LIST:"array",DICTIONARY:"dictionary"}},74:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(6),a=n(146),i=n(147),o=n.n(i),c=new a.a({apiRoot:"https://api.dataestate.net",authMode:e.env.AUTH_MODE,apiKey:"123412341234",accessToken:e.env.ACCESS_TOKEN?e.env.ACCESS_TOKEN:""}),s=function(e){return function(t){return t(function(e){return{type:r.a.REQUEST_GET,entityType:r.b.ESTATE,params:e}}(e)),c.get("/estates/data",e).then(function(e){return[401,403].includes(e.status)?Promise.reject(e):e.json()}).then(function(n){return t(function(e,t){return{type:r.a.RECEIVED_GET,entityType:r.b.ESTATE,params:e,list:t,receivedAt:Date.now()}}(e,n))}).catch(function(e){var n,a=e.status,i=e.statusText;if(""===i)switch(a){case 401:i="Unauthorized request. ";break;case 403:i="Forbidden request."}return t((n={status:a,message:i},{type:r.a.UNAUTHORIZED_REQUEST,error:n}))})}},u=function(e){return function(t,n){return function(e,t){var n=e.estates;return!n.list||n.list.length<=0||!o()(n.searchFilters,t)||!n.isFetching&&n.didInvalidate}(n(),e)?t(s(e)):Promise.resolve()}}}).call(this,n(359))}}]);